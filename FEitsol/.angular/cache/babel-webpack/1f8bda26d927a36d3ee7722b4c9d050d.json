{"ast":null,"code":"import _asyncToGenerator from \"D:/ITSOL_DoAn_Frontend/FEitsol/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { ChangePassword } from './../../../models/changePassword';\nimport { Component } from '@angular/core';\nimport { HttpHeaders } from '@angular/common/http';\nlet ChangePasswordComponent = class ChangePasswordComponent {\n  constructor(rests, data, router, p) {\n    this.rests = rests;\n    this.data = data;\n    this.router = router;\n    this.btnDisable = false;\n    this.url = 'http://localhost:8080/api/user/info/change-password';\n    this.urlOtp = 'http://localhost:8080/api/user/users/info/change-password';\n    this.changePassword = new ChangePassword();\n  }\n\n  ngOnInit() {}\n\n  validate() {\n    return true;\n  }\n\n  changePass() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      debugger;\n      _this.btnDisable = true;\n\n      _this.rests.post(_this.url, _this.changePassword).then(data => {\n        console.log(data);\n        let value = data;\n        localStorage.getItem('token'); // await this.data.getProfile();\n\n        let otp = prompt(\"Mã OTP:\");\n\n        _this.rests.put(_this.urlOtp, {\n          otpCode: otp,\n          password: _this.changePassword.newPassword\n        }).then(data => {\n          alert(\"Doi mat khau thanh cong!\");\n        }).catch(error => {\n          alert(\"Doi mat khau that bai\");\n        });\n\n        _this.router.navigate(['user/otp']);\n      }).catch(error => {\n        _this.data.error(error['error']);\n\n        _this.btnDisable = false;\n      });\n    })();\n  }\n\n  post(link, body) {\n    let headers = this.rests.getHeaders();\n    if (headers instanceof HttpHeaders) return this.http.post(link, body, {\n      headers: headers\n    }).toPromise();\n    return this.http.post(link, body).toPromise();\n  }\n\n};\nChangePasswordComponent = __decorate([Component({\n  selector: 'app-change-password',\n  templateUrl: './change-password.component.html',\n  styleUrls: ['./change-password.component.css']\n})], ChangePasswordComponent);\nexport { ChangePasswordComponent };","map":{"version":3,"sources":["D:/ITSOL_DoAn_Frontend/FEitsol/src/app/components/authen/change-password/change-password.component.ts"],"names":["__decorate","ChangePassword","Component","HttpHeaders","ChangePasswordComponent","constructor","rests","data","router","p","btnDisable","url","urlOtp","changePassword","ngOnInit","validate","changePass","post","then","console","log","value","localStorage","getItem","otp","prompt","put","otpCode","password","newPassword","alert","catch","error","navigate","link","body","headers","getHeaders","http","toPromise","selector","templateUrl","styleUrls"],"mappings":";AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,cAAT,QAA+B,kCAA/B;AACA,SAASC,SAAT,QAA0B,eAA1B;AACA,SAASC,WAAT,QAA4B,sBAA5B;AACA,IAAIC,uBAAuB,GAAG,MAAMA,uBAAN,CAA8B;AACxDC,EAAAA,WAAW,CAACC,KAAD,EAAQC,IAAR,EAAcC,MAAd,EAAsBC,CAAtB,EAAyB;AAChC,SAAKH,KAAL,GAAaA,KAAb;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKE,UAAL,GAAkB,KAAlB;AACA,SAAKC,GAAL,GAAW,qDAAX;AACA,SAAKC,MAAL,GAAc,2DAAd;AACA,SAAKC,cAAL,GAAsB,IAAIZ,cAAJ,EAAtB;AACH;;AACDa,EAAAA,QAAQ,GAAG,CAAG;;AACdC,EAAAA,QAAQ,GAAG;AACP,WAAO,IAAP;AACH;;AACKC,EAAAA,UAAU,GAAG;AAAA;;AAAA;AACf;AACA,MAAA,KAAI,CAACN,UAAL,GAAkB,IAAlB;;AACA,MAAA,KAAI,CAACJ,KAAL,CAAWW,IAAX,CAAgB,KAAI,CAACN,GAArB,EAA0B,KAAI,CAACE,cAA/B,EACKK,IADL,CACWX,IAAD,IAAU;AAChBY,QAAAA,OAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,YAAIc,KAAK,GAAGd,IAAZ;AACAe,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAHgB,CAIhB;;AACA,YAAIC,GAAG,GAAGC,MAAM,CAAC,SAAD,CAAhB;;AACA,QAAA,KAAI,CAACnB,KAAL,CAAWoB,GAAX,CAAe,KAAI,CAACd,MAApB,EAA4B;AACxBe,UAAAA,OAAO,EAAEH,GADe;AAExBI,UAAAA,QAAQ,EAAE,KAAI,CAACf,cAAL,CAAoBgB;AAFN,SAA5B,EAGGX,IAHH,CAGSX,IAAD,IAAU;AACduB,UAAAA,KAAK,CAAC,0BAAD,CAAL;AACH,SALD,EAKGC,KALH,CAKUC,KAAD,IAAW;AAChBF,UAAAA,KAAK,CAAC,uBAAD,CAAL;AACH,SAPD;;AAQA,QAAA,KAAI,CAACtB,MAAL,CAAYyB,QAAZ,CAAqB,CAAC,UAAD,CAArB;AACH,OAhBD,EAiBKF,KAjBL,CAiBYC,KAAD,IAAW;AAClB,QAAA,KAAI,CAACzB,IAAL,CAAUyB,KAAV,CAAgBA,KAAK,CAAC,OAAD,CAArB;;AACA,QAAA,KAAI,CAACtB,UAAL,GAAkB,KAAlB;AACH,OApBD;AAHe;AAwBlB;;AACDO,EAAAA,IAAI,CAACiB,IAAD,EAAOC,IAAP,EAAa;AACb,QAAIC,OAAO,GAAG,KAAK9B,KAAL,CAAW+B,UAAX,EAAd;AACA,QAAID,OAAO,YAAYjC,WAAvB,EACI,OAAO,KAAKmC,IAAL,CAAUrB,IAAV,CAAeiB,IAAf,EAAqBC,IAArB,EAA2B;AAAEC,MAAAA,OAAO,EAAEA;AAAX,KAA3B,EAAiDG,SAAjD,EAAP;AACJ,WAAO,KAAKD,IAAL,CAAUrB,IAAV,CAAeiB,IAAf,EAAqBC,IAArB,EAA2BI,SAA3B,EAAP;AACH;;AA5CuD,CAA5D;AA8CAnC,uBAAuB,GAAGJ,UAAU,CAAC,CACjCE,SAAS,CAAC;AACNsC,EAAAA,QAAQ,EAAE,qBADJ;AAENC,EAAAA,WAAW,EAAE,kCAFP;AAGNC,EAAAA,SAAS,EAAE,CAAC,iCAAD;AAHL,CAAD,CADwB,CAAD,EAMjCtC,uBANiC,CAApC;AAOA,SAASA,uBAAT","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { ChangePassword } from './../../../models/changePassword';\r\nimport { Component } from '@angular/core';\r\nimport { HttpHeaders } from '@angular/common/http';\r\nlet ChangePasswordComponent = class ChangePasswordComponent {\r\n    constructor(rests, data, router, p) {\r\n        this.rests = rests;\r\n        this.data = data;\r\n        this.router = router;\r\n        this.btnDisable = false;\r\n        this.url = 'http://localhost:8080/api/user/info/change-password';\r\n        this.urlOtp = 'http://localhost:8080/api/user/users/info/change-password';\r\n        this.changePassword = new ChangePassword();\r\n    }\r\n    ngOnInit() { }\r\n    validate() {\r\n        return true;\r\n    }\r\n    async changePass() {\r\n        debugger;\r\n        this.btnDisable = true;\r\n        this.rests.post(this.url, this.changePassword)\r\n            .then((data) => {\r\n            console.log(data);\r\n            let value = data;\r\n            localStorage.getItem('token');\r\n            // await this.data.getProfile();\r\n            let otp = prompt(\"Mã OTP:\");\r\n            this.rests.put(this.urlOtp, {\r\n                otpCode: otp,\r\n                password: this.changePassword.newPassword\r\n            }).then((data) => {\r\n                alert(\"Doi mat khau thanh cong!\");\r\n            }).catch((error) => {\r\n                alert(\"Doi mat khau that bai\");\r\n            });\r\n            this.router.navigate(['user/otp']);\r\n        })\r\n            .catch((error) => {\r\n            this.data.error(error['error']);\r\n            this.btnDisable = false;\r\n        });\r\n    }\r\n    post(link, body) {\r\n        let headers = this.rests.getHeaders();\r\n        if (headers instanceof HttpHeaders)\r\n            return this.http.post(link, body, { headers: headers }).toPromise();\r\n        return this.http.post(link, body).toPromise();\r\n    }\r\n};\r\nChangePasswordComponent = __decorate([\r\n    Component({\r\n        selector: 'app-change-password',\r\n        templateUrl: './change-password.component.html',\r\n        styleUrls: ['./change-password.component.css']\r\n    })\r\n], ChangePasswordComponent);\r\nexport { ChangePasswordComponent };\r\n"]},"metadata":{},"sourceType":"module"}